var mobileapp=angular.module("header_slider",["ngRoute","ngTouch"]);mobileapp.filter("trustUrl",["$sce",function(i){return function(t){return i.trustAsResourceUrl(t)}}]),mobileapp.controller("MobileAppController",["$scope","$rootScope","$timeout","$location",function(i,t,s,e){t.$on("$stateChangeStart",function(i,t,s){if(e.path().indexOf("/blog")>-1||e.path().indexOf("/blogs")>-1){if(0===$('head link[href="/blog.atom"][rel="alternate"][type="application/atom+xml"]').length){$("head").append('<link rel="alternate" type="application/atom+xml" href="/blog.atom">')}}else $('head link[href="/blog.atom"]').length>0&&$('LINK[href="/blog.atom"]').remove()}),i.showCat=!0,i.showmenu=!1,i.toggleMenu=function(){i.showmenu=!i.showmenu},t.$on("$stateChangeStart",function(t,s,e){i.showmenu=!1,i.showCat=!1}),s(function(){i.showCat=!0},100)}]),angular.module("mystore").directive("msCloudZoom",["$rootScope","$timeout",function(i,t){return{link:function(i,s,e){if(i.settings.sizemode)var a=i.settings.sizemode;else a="image";if(i.settings.zoomposition)var n=i.settings.zoomposition;else n=4;var l="",h=null;e.$observe("msDataPath",function(t){l=t,i.settings.path=l,r(l)});var r=function(i){h?h.loadImage(i,i):angular.element(s).CloudZoom?t(function(){angular.element(s).CloudZoom({zoomImage:i,zoomSizeMode:a,tintColor:"white",tintOpacity:.25,captionPosition:"bottom",maxMagnification:4,variableMagnification:!1,zoomPosition:n,autoInside:!0}),h=angular.element(s).data("CloudZoom")},500):(window.mystore.utils.loadCss("https://cdn.storehippo.com/global/assets/cloudzoom.css"),angular.element(s)&&(angular.element(s).CloudZoom({zoomImage:i,zoomSizeMode:a,tintColor:"white",tintOpacity:.25,captionPosition:"bottom",maxMagnification:4,variableMagnification:!1,zoomPosition:n,autoInside:!0}),h=angular.element(s).data("CloudZoom")))}}}}]).filter("groupBy",function(){var i={};return function(t,s){if(t&&s){var e;if(this.$id){var a=this.$id;i[a]||(i[a]={},this.$on("$destroy",function(){delete i[a]})),e=i[a]}else e={};for(var n in e)e[n].splice(0,e[n].length);for(var l=0;l<t.length;l++)e[t[l][s]]||(e[t[l][s]]=[]),e[t[l][s]].push(t[l]);for(var h=Object.keys(e),r=0;r<h.length;r++)0===e[h[r]].length&&delete e[h[r]];return e}}}),angular.module("rzModule",[]).value("throttle",function(i,t,s){var e,a,n,l=Date.now||function(){return(new Date).getTime()},h=null,r=0;s||(s={});var o=function(){r=!1===s.leading?0:l(),h=null,n=i.apply(e,a),e=a=null};return function(){var d=l();r||!1!==s.leading||(r=d);var c=t-(d-r);return e=this,a=arguments,c<=0?(clearTimeout(h),h=null,r=d,n=i.apply(e,a),e=a=null):h||!1===s.trailing||(h=setTimeout(o,c)),n}}).factory("Slider",["$timeout","$document","throttle",function(i,t,s){var e=function(i,t,s){this.scope=i,this.attributes=s,this.sliderElem=t,this.range=void 0!==s.rzSliderHigh&&void 0!==s.rzSliderModel,this.handleHalfWidth=0,this.maxLeft=0,this.precision=0,this.step=0,this.tracking="",this.minValue=0,this.maxValue=0,this.valueRange=0,this.initRun=!1,this.customTrFn=null,this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.init()};return e.prototype={init:function(){var t=this;this.scope.rzSliderTranslate&&(this.customTrFn=this.scope.rzSliderTranslate()),this.initElemHandles(),this.calcViewDimensions(),this.setMinAndMax(),this.precision=void 0===this.scope.rzSliderPrecision?0:+this.scope.rzSliderPrecision,this.step=void 0===this.scope.rzSliderStep?1:+this.scope.rzSliderStep,i(function(){t.updateCeilLab(),t.updateFloorLab(),t.initHandles(),t.bindEvents()}),this.scope.$on("reCalcViewDimensions",angular.bind(this,this.calcViewDimensions)),angular.element(window).on("resize",angular.bind(this,this.calcViewDimensions)),this.initRun=!0;var e=s(function(){t.setMinAndMax(),t.updateLowHandle(t.valueToOffset(t.scope.rzSliderModel)),t.range&&(t.updateSelectionBar(),t.updateCmbLabel())},350,{leading:!1}),a=s(function(){t.setMinAndMax(),t.updateHighHandle(t.valueToOffset(t.scope.rzSliderHigh)),t.updateSelectionBar(),t.updateCmbLabel()},350,{leading:!1});this.scope.$on("rzSliderForceRender",function(){t.resetLabelsValue(),e(),a(),t.resetSlider()}),this.scope.$watch("rzSliderModel",function(i,t){i!==t&&e()}),this.scope.$watch("rzSliderHigh",function(i,t){i!==t&&a()}),this.scope.$watch("rzSliderFloor",function(i,s){i!==s&&t.resetSlider()}),this.scope.$watch("rzSliderCeil",function(i,s){i!==s&&t.resetSlider()})},resetSlider:function(){this.setMinAndMax(),this.calcViewDimensions(),this.updateCeilLab(),this.updateFloorLab()},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToOffset(this.scope.rzSliderModel)),this.range&&(this.updateHighHandle(this.valueToOffset(this.scope.rzSliderHigh)),this.updateSelectionBar(),this.updateCmbLabel())},translateFn:function(i,t,s){s=void 0===s||s;var e=this.customTrFn&&s?""+this.customTrFn(i):""+i,a=!1;void 0!==t.rzsv&&t.rzsv.length==e.length||(a=!0,t.rzsv=e),t.text(e),a&&this.getWidth(t)},setMinAndMax:function(){this.scope.rzSliderFloor?this.minValue=+this.scope.rzSliderFloor:this.minValue=this.scope.rzSliderFloor=0,this.scope.rzSliderCeil?this.maxValue=+this.scope.rzSliderCeil:this.scope.rzSliderCeil=this.maxValue=this.range?this.scope.rzSliderHigh:this.scope.rzSliderModel,this.valueRange=this.maxValue-this.minValue},initElemHandles:function(){angular.forEach(this.sliderElem.children(),function(i,t){var s=angular.element(i);switch(t){case 0:this.fullBar=s;break;case 1:this.selBar=s;break;case 2:this.minH=s;break;case 3:this.maxH=s;break;case 4:this.flrLab=s;break;case 5:this.ceilLab=s;break;case 6:this.minLab=s;break;case 7:this.maxLab=s;break;case 8:this.cmbLab=s}},this),this.fullBar.rzsl=0,this.selBar.rzsl=0,this.minH.rzsl=0,this.maxH.rzsl=0,this.flrLab.rzsl=0,this.ceilLab.rzsl=0,this.minLab.rzsl=0,this.maxLab.rzsl=0,this.cmbLab.rzsl=0,this.range||(this.cmbLab.remove(),this.maxLab.remove(),this.maxH.remove(),this.selBar.remove())},calcViewDimensions:function(){var i=this.getWidth(this.minH);this.handleHalfWidth=i/2,this.barWidth=this.getWidth(this.fullBar),this.maxLeft=this.barWidth-i,this.getWidth(this.sliderElem),this.sliderElem.rzsl=this.sliderElem[0].getBoundingClientRect().left,this.initRun&&(this.updateCeilLab(),this.initHandles())},updateCeilLab:function(){this.translateFn(this.scope.rzSliderCeil,this.ceilLab),this.setLeft(this.ceilLab,this.barWidth-this.ceilLab.rzsw),this.getWidth(this.ceilLab)},updateFloorLab:function(){this.translateFn(this.scope.rzSliderFloor,this.flrLab),this.getWidth(this.flrLab)},updateHandles:function(i,t){return"rzSliderModel"===i?(this.updateLowHandle(t),void(this.range&&(this.updateSelectionBar(),this.updateCmbLabel()))):"rzSliderHigh"===i?(this.updateHighHandle(t),void(this.range&&(this.updateSelectionBar(),this.updateCmbLabel()))):(this.updateLowHandle(t),this.updateHighHandle(t),this.updateSelectionBar(),void this.updateCmbLabel())},updateLowHandle:function(i){this.setLeft(this.minH,i),this.translateFn(this.scope.rzSliderModel,this.minLab),this.setLeft(this.minLab,i-this.minLab.rzsw/2+this.handleHalfWidth),this.shFloorCeil()},updateHighHandle:function(i){this.setLeft(this.maxH,i),this.translateFn(this.scope.rzSliderHigh,this.maxLab),this.setLeft(this.maxLab,i-this.maxLab.rzsw/2+this.handleHalfWidth),this.shFloorCeil()},shFloorCeil:function(){var i=!1,t=!1;this.minLab.rzsl<=this.flrLab.rzsl+this.flrLab.rzsw+5?(i=!0,this.hideEl(this.flrLab)):(i=!1,this.showEl(this.flrLab)),this.minLab.rzsl+this.minLab.rzsw>=this.ceilLab.rzsl-this.handleHalfWidth-10?(t=!0,this.hideEl(this.ceilLab)):(t=!1,this.showEl(this.ceilLab)),this.range&&(this.maxLab.rzsl+this.maxLab.rzsw>=this.ceilLab.rzsl-10?this.hideEl(this.ceilLab):t||this.showEl(this.ceilLab),this.maxLab.rzsl<=this.flrLab.rzsl+this.flrLab.rzsw+this.handleHalfWidth?this.hideEl(this.flrLab):i||this.showEl(this.flrLab))},updateSelectionBar:function(){this.setWidth(this.selBar,this.maxH.rzsl-this.minH.rzsl),this.setLeft(this.selBar,this.minH.rzsl+this.handleHalfWidth)},updateCmbLabel:function(){var i,t;this.minLab.rzsl+this.minLab.rzsw+10>=this.maxLab.rzsl?(this.customTrFn?(i=this.customTrFn(this.scope.rzSliderModel),t=this.customTrFn(this.scope.rzSliderHigh)):(i=this.scope.rzSliderModel,t=this.scope.rzSliderHigh),this.translateFn(i+" - "+t,this.cmbLab,!1),this.setLeft(this.cmbLab,this.selBar.rzsl+this.selBar.rzsw/2-this.cmbLab.rzsw/2),this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)):(this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab))},roundStep:function(i){var t=this.step,s=(i-this.minValue)%t;return+(s>t/2?i+t-s:i-s).toFixed(this.precision)},hideEl:function(i){return i.css({opacity:0})},showEl:function(i){return i.css({opacity:1})},setLeft:function(i,t){return i.rzsl=t,i.css({left:t+"px"}),t},getWidth:function(i){var t=i[0].getBoundingClientRect();return i.rzsw=t.right-t.left,i.rzsw},setWidth:function(i,t){return i.rzsw=t,i.css({width:t+"px"}),t},valueToOffset:function(i){return(i-this.minValue)*this.maxLeft/this.valueRange},offsetToValue:function(i){return i/this.maxLeft*this.valueRange+this.minValue},bindEvents:function(){this.minH.on("mousedown",angular.bind(this,this.onStart,this.minH,"rzSliderModel")),this.range&&this.maxH.on("mousedown",angular.bind(this,this.onStart,this.maxH,"rzSliderHigh")),this.minH.on("touchstart",angular.bind(this,this.onStart,this.minH,"rzSliderModel")),this.range&&this.maxH.on("touchstart",angular.bind(this,this.onStart,this.maxH,"rzSliderHigh"))},onStart:function(i,s,e){e.stopPropagation(),e.preventDefault(),""===this.tracking&&(this.calcViewDimensions(),this.tracking=s,i.addClass("active"),e.touches?(t.on("touchmove",angular.bind(this,this.onMove,i)),t.on("touchend",angular.bind(this,this.onEnd))):(t.on("mousemove",angular.bind(this,this.onMove,i)),t.on("mouseup",angular.bind(this,this.onEnd))))},onMove:function(i,t){var s,e=(t.clientX||t.touches[0].clientX)-this.sliderElem.rzsl-this.handleHalfWidth;e<=0?0!==i.rzsl&&(this.scope[this.tracking]=this.minValue,this.updateHandles(this.tracking,0),this.scope.$apply()):e>=this.maxLeft?i.rzsl!==this.maxLeft&&(this.scope[this.tracking]=this.maxValue,this.updateHandles(this.tracking,this.maxLeft),this.scope.$apply()):(s=this.offsetToValue(e),s=this.roundStep(s),this.range&&("rzSliderModel"===this.tracking&&s>=this.scope.rzSliderHigh?(this.scope[this.tracking]=this.scope.rzSliderHigh,this.updateHandles(this.tracking,this.maxH.rzsl),this.tracking="rzSliderHigh",this.minH.removeClass("active"),this.maxH.addClass("active")):"rzSliderHigh"===this.tracking&&s<=this.scope.rzSliderModel&&(this.scope[this.tracking]=this.scope.rzSliderModel,this.updateHandles(this.tracking,this.minH.rzsl),this.tracking="rzSliderModel",this.maxH.removeClass("active"),this.minH.addClass("active"))),this.scope[this.tracking]!==s&&(this.scope[this.tracking]=s,this.updateHandles(this.tracking,e),this.scope.$apply()))},onEnd:function(i){this.minH.removeClass("active"),this.maxH.removeClass("active"),i.touches?(t.unbind("touchmove"),t.unbind("touchend")):(t.unbind("mousemove"),t.unbind("mouseup")),this.tracking=""}},e}]).directive("rzslider",["Slider","$rootScope",function(i,t){return{restrict:"EA",scope:{rzSliderFloor:"=?",rzSliderCeil:"=?",rzSliderStep:"@",rzSliderPrecision:"@",rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderTranslate:"&"},template:'<span class="bar"></span><span class="bar selection"></span><span class="pointer"></span><span class="pointer"></span><span class="bubble limit"></span><span class="bubble limit"></span><span class="bubble"></span><span class="bubble"> </span><span class="bubble"></span>',link:function(t,s,e){return new i(t,s,e)}}}]);